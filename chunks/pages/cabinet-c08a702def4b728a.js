(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[824],{2938:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cabinet",function(){return t(10)}])},10:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return z}});var n=t(5893),a=t(7294),s=t(1163),o=t(6502),c=t(3210),i=t(3339),l=t(7433);t(4675);var u=t(5121);let d=u.Z.create({baseURL:"https://ars-fit-studio-server.onrender.com",headers:{"Content-Type":"application/json"}}),g=u.Z.create({baseURL:"https://api.telegram.org/bot5673512453:AAH-Ac0g-PMN8FwXj16kLg8OiXl99PYJYi8/sendMessage?chat_id=525427019&text=",headers:{"Content-Type":"application/json"}}),p={OnLogin:async(e,r)=>{try{let t=await d.post("/user/login",{tel:e,password:r}),n=t.data.name;return l.Am.success("".concat(n,", Ви успішно увійшли")),t}catch(e){console.log("Error: ",e),e.response&&e.response.data&&e.response.data.message?l.Am.error(e.response.data.message):l.Am.error("Щось пішло не так")}},OnAuth:async e=>{try{return await d.post("/user/auth",{token:e})}catch(e){console.log("Error: ",e),l.Am.error("Щось пішло не так")}},OnRegistration:async(e,r,t,n)=>{try{let a=await d.post("/user/registration",{name:e,birthday:r,tel:t,password:n});return l.Am.success("".concat(e,", Ви успішно зареєструвалися")),a.data}catch(e){console.log("Error: ",e),e.response&&e.response.data&&e.response.data.message?l.Am.error(e.response.data.message):l.Am.error("Щось пішло не так")}},OnUpgradeUser:async e=>{try{let r=await d.post("/user/upgrade",e);return l.Am.success("Зміни внесено успішно"),r}catch(e){l.Am.error("Упс, щось пішло не так"),console.error(e.message)}},OnUpgradeUserPassword:async e=>{try{let r=await d.post("/user/upgrade/password",e);return l.Am.success("Зміни внесено успішно"),console.log(r),r}catch(e){l.Am.error("Упс, щось пішло не так"),console.error(e.message)}},OnGetAllSeasonTickets:async()=>{try{return(await d.get("/seasonTickets")).data}catch(e){l.Am.error("Упс, щось пішло не так"),console.error(e.message)}},OnSendTgBuySeasonTicket:async e=>{try{let r="https://www.instagram.com/".concat(e.user.instagram,"/"),t="";"group"===e.seasonTicket.kind&&(t="групових"),"personal"===e.seasonTicket.kind&&(t="персональних");let n=e.user.tel.replace(/\D/g,""),a=n.startsWith("38")?n.slice(2):n;return await g.get("Клієнт ".concat(e.user.name," ").concat(e.user.surname," бажає придбати абонемент на ").concat(e.seasonTicket.name," для ").concat(t," занять вартістю ").concat(e.seasonTicket.price," грн. Номер телефону клієнта: ").concat(a,", instagram: ").concat(r))}catch(e){l.Am.error("Щось пішло не так"),console.log(e.message)}},OnBuySeasonTicket:async e=>{try{return(await d.post("/seasonTickets",e)).data}catch(e){l.Am.error("Упс, щось пішло не так"),console.error(e.message)}},OnRecordTraining:async e=>{try{let r=await d.post("/user/signUpTraining",e);if(r.data.messages.error&&"Кількість тренувань по абонементу закінчилася. Ви записані як на разове заняття"===r.data.messages.error)return l.Am.warning("".concat(r.data.messages.error)),r;if("Повторний запис на тренування"===r.data.messages.error)l.Am.error("Повторний запис на тренування");else if("Ви не маєте абонементу. Запис на тренування без абонементу"===r.data.messages.warning)return l.Am.info("Ви не маєте абонементу. Запис на тренування без абонементу"),r;else return l.Am.success("Ви успішно записалися на тренування"),r}catch(e){l.Am.error("Щось пішло не так"),console.log(e)}},OnGetCoachTrainings:async(e,r)=>{try{return(await d.post("/user/coach",{coachLabel:e,date:r})).data}catch(e){l.Am.error("Упс, щось пішло не так"),console.error(e.message)}},OnSendVisitTraining:async e=>{console.log(e);try{let r=await d.post("/user/coach/visit",e);return r.data.message.error&&l.Am.info(r.data.message.error),r.data.message.error}catch(e){l.Am.error("Упс, щось пішло не так"),console.error(e.message)}},OnGetCoaches:async()=>{try{return(await d.get("/user/coach")).data}catch(e){l.Am.error("Упс, щось пішло не так"),console.error(e.message)}},OnGetCoachSalary:async e=>{try{return(await d.put("/user/coach/salary",e)).data}catch(e){l.Am.error("Упс, щось пішло не так"),console.error(e.message)}},OnGetAllUsers:async()=>{try{return(await d.get("/user/all")).data}catch(e){l.Am.error("Упс, щось пішло не так"),console.error(e.message)}},OnGetSeasonTicketsNotConfirm:async()=>{try{return(await d.get("/user/seasonTicketsConfirm")).data}catch(e){l.Am.error("Упс, щось пішло не так"),console.error(e.message)}},OnSeasonTicketConfirm:async(e,r,t)=>{try{let n=await d.post("/user/seasonTicketsConfirm",{idSeasonTicket:e,idUser:r,selectedDateValue:t});if("Абонемент вже було підтверджено"===n.data.error)return l.Am.error("".concat(n.data.error));return l.Am.success("".concat(n.data)),n.data}catch(e){l.Am.error("Упс, щось пішло не так"),console.error(e.message)}},OnGetCoachTrainingsPeriod:async e=>{try{return(await d.put("/user/coach/trainings",e)).data}catch(e){l.Am.error("Упс, щось пішло не так"),console.error(e.message)}}};t(8758);var m=t(6085),h=t(5341),f=t(2729),x=t(964);function y(){let e=(0,f._)(["\n  text-align: center;\n  font-family: Arial, sans-serif;\n  max-width: 400px;\n  margin: 0 auto;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  background: linear-gradient(to right, #e66465, #9198e5);\n  box-shadow: 0px 0px 8px 8px rgba(0, 0, 0, 0.5);\n  margin: 10px;\n"]);return y=function(){return e},e}function b(){let e=(0,f._)(["\n  display: flex;\n  flex-direction: column;\n  width: 400px;\n"]);return b=function(){return e},e}function w(){let e=(0,f._)(["\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10px;\n"]);return w=function(){return e},e}function A(){let e=(0,f._)(["\n  flex: 1;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 12px;\n  /* background-color: #ffb74d; */\n  margin: 10px;\n"]);return A=function(){return e},e}function k(){let e=(0,f._)(["\n  margin: 5px 0;\n  font-weight: bold;\n"]);return k=function(){return e},e}function j(){let e=(0,f._)(["\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n"]);return j=function(){return e},e}function v(){let e=(0,f._)(["\n  padding: 10px;\n  border: none;\n  border-radius: 5px;\n  background-color: #007bff;\n  color: #fff;\n  margin-top: 10px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n\n  &:hover {\n    background-color: #0056b3;\n  }\n"]);return v=function(){return e},e}function T(){let e=(0,f._)(["\n  display: flex;\n  flex-direction: column;\n  position: relative;\n"]);return T=function(){return e},e}function C(){let e=(0,f._)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  margin-top: 35px;\n  margin-right: 20px;\n"]);return C=function(){return e},e}let O=x.ZP.div(y()),_=x.ZP.form(b()),S=x.ZP.div(w()),P=x.ZP.button(A()),Z=x.ZP.label(k()),E=x.ZP.input(j()),N=x.ZP.button(v()),U=x.ZP.div(T()),G=x.ZP.div(C());var R=()=>{let[e,r]=(0,a.useState)(!0),[t,l]=(0,a.useState)(!1),[u,d]=(0,a.useState)(!1),[g,f]=(0,a.useState)(""),[x,y]=(0,a.useState)(""),[b,w]=(0,a.useState)("+380981058240"),[A,k]=(0,a.useState)("74Omevet"),j=(0,o.I0)(),v=(0,s.useRouter)(),T=async r=>{r.preventDefault();let n=e?await p.OnLogin(b,A):t?await p.OnRegistration(g,x,b,A):null;if(n){let e=await p.OnGetAllSeasonTickets(),r={...n.data,isAuthenticated:!0};j((0,c.a)(r)),j((0,i.P)(e)),localStorage.setItem("token",r.token),v.push("/cabinet")}};(0,a.useEffect)(()=>{let e=localStorage.getItem("token");(async()=>{if(e)try{let r=await verifyToken(e),t=await getSeasonTickets(),n={...r.data,isAuthenticated:!0};j((0,c.a)(n)),j((0,i.P)(t)),v.push("/cabinet")}catch(e){console.error("Error fetching data:",e)}})()},[]);let C=e=>(e.preventDefault(),"login"===e.target.id)?(l(!1),r(!0)):"registration"===e.target.id?(r(!1),l(!0)):void 0,R=e=>{e.preventDefault(),d(!u)};return(0,n.jsx)(O,{children:(0,n.jsxs)(_,{onSubmit:e=>T(e),children:[(0,n.jsxs)(S,{children:[(0,n.jsx)(P,{id:"login",className:e?"active_btn":"",onClick:C,children:"Вхід"}),(0,n.jsx)(P,{id:"registration",className:t?"active_btn":"",onClick:C,children:"Реєстрація"})]}),t?(0,n.jsxs)(U,{children:[(0,n.jsx)(Z,{children:"Ім'я"}),(0,n.jsx)(E,{type:"text",placeholder:"ім'я",value:g,onChange:e=>f(e.target.value)}),(0,n.jsx)(Z,{children:"Дата народження"}),(0,n.jsx)(E,{type:"date",placeholder:"дата народження",value:x,onChange:e=>y(e.target.value)})]}):(0,n.jsx)(n.Fragment,{}),(0,n.jsxs)(U,{children:[(0,n.jsx)(Z,{children:"Логін"}),(0,n.jsx)(m.ZP,{placeholder:"номер телефону",international:!0,defaultCountry:"UA",initialValueFormat:"national",countryCallingCodeEditable:!1,value:b,onChange:w,style:{border:"1px solid #ccc",borderRadius:"5px",backgroundColor:"#fff",paddingLeft:"10px"}}),"Is possible: ",b&&(0,m.tm)(b)?"true":"false"]}),(0,n.jsxs)(U,{children:[(0,n.jsx)(Z,{children:"Пароль"}),(0,n.jsx)(E,{type:u?"text":"password",placeholder:"пароль",value:A,onChange:e=>k(e.target.value)}),(0,n.jsx)(G,{children:u?(0,n.jsx)(h.ZQs,{onClick:R,size:20}):(0,n.jsx)(h.KXh,{onClick:R,size:20})})]}),e?(0,n.jsx)(N,{type:"submit",to:"/cabinet",children:"Увійти"}):(0,n.jsx)(N,{type:"submit",to:"/cabinet",children:"Зареєструватися"})]})})},L=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(R,{})});t(8828);var X=t(3015),D=t(7079),F=t(3391),I=t(8997);t(6776);var z=()=>(0,n.jsx)("div",{className:"wrapper",children:(0,n.jsxs)(o.zt,{store:D.Z,children:[(0,n.jsx)(X.Z,{}),(0,n.jsx)(L,{}),(0,n.jsx)(I.Z,{}),(0,n.jsx)(F.Z,{})]})})}},function(e){e.O(0,[127,151,768,660,123,613,206,173,298,888,774,179],function(){return e(e.s=2938)}),_N_E=e.O()}]);